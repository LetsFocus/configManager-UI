---
interface Props {
	code: string;
	language: string;
}

const { code, language } = Astro.props;
---

<div class="relative">
	<pre class="language-{language} rounded-lg"><code class="language-{language}">{code}</code></pre>
	<button
		class="absolute top-2 right-2 px-2 py-1 text-sm bg-gray-700 text-white rounded hover:bg-gray-600 copy-button"
		data-code={code}
	>
		Copy
	</button>
</div>

<script>
	document.querySelectorAll('.copy-button').forEach((button) => {
		button.addEventListener('click', () => {
			const code = button.getAttribute('data-code') || '';
			navigator.clipboard.writeText(code);
			button.textContent = 'Copied!';
			setTimeout(() => {
				button.textContent = 'Copy';
			}, 2000);
		});
	});
</script>