---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// Fetch all markdown files from the "docs" collection
const docs = await getCollection('docs');

// Define the static paths based on slugs from markdown files
export function getStaticPaths() {
  return docs.map(doc => ({
    params: { slug: doc.slug } // Generate a path for each markdown file
  }));
}

const { slug } = Astro.params; // Extract slug from the URL
const doc = docs.find(d => d.slug === slug); // Find the matching document based on the slug

if (!doc) {
  throw new Error(`No document found for slug: ${slug}`);
}

---

<Layout>
  <!-- Display documentation content -->
  <article class="prose mx-auto">
    <h1>{doc.data.title}</h1>
    <div innerHTML={doc.body} />
  </article>
</Layout>
